#!/usr/bin/env php
<?php

require __DIR__ . '/../vendor/autoload.php';

use AnwarSaeed\InvoiceProcessor\Commands\ImportCommand;

if ($argc < 2) {
    echo "Available commands:\n";
    echo "  import <file_path>  - Import data from Excel file\n";
    echo "  export <format>     - Export data to JSON/XML (format: json|xml)\n";
    exit(1);
}

$command = $argv[1];

try {
    switch ($command) {
        case 'import':
            $importCommand = new ImportCommand();
            $importCommand->execute(array_slice($argv, 1));
            break;
            
        case 'export':
            if ($argc < 3) {
                echo "Usage: php bin/console export <format>\n";
                echo "Formats: json, xml\n";
                exit(1);
            }
            $format = $argv[2];
            $exportCommand = new \AnwarSaeed\InvoiceProcessor\Commands\ExportCommand();
            $exportCommand->execute([$format]);
            break;
            
        default:
            echo "Unknown command: $command\n";
            echo "Available commands: import, export\n";
            exit(1);
    }
} catch (Exception $e) {
    echo "Error: " . $e->getMessage() . "\n";
    exit(1);
}